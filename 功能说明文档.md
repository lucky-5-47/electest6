# ç”µè·¯è®¾è®¡å¹³å° - åŠŸèƒ½è¯´æ˜æ–‡æ¡£

## 1ï¸âƒ£ 74LS138å®éªŒè¯´æ˜æ‹–åŠ¨åŠŸèƒ½

### ğŸ“ æ–‡ä»¶ä½ç½®
**æ–‡ä»¶**ï¼š`74ls138.js`

### ğŸ” å…³é”®ä»£ç ä½ç½®

#### 1. å¯¹è¯æ¡†HTMLç»“æ„ï¼ˆç¬¬189-286è¡Œï¼‰
```javascript
const ls138DialogHTML = `
<div id="ls138-dialog" class="component-dialog draggable-dialog resizable-dialog" 
     style="display: none; position: fixed; top: 50%; left: 50%; 
            transform: translate(-50%, -50%); z-index: 10000; 
            width: 800px; height: 600px; 
            min-width: 600px; min-height: 400px;">
    <div class="dialog-content" style="width: 100%; height: 100%; 
         background: white; border: 2px solid #333; 
         border-radius: 8px; box-shadow: 0 4px 20px rgba(0,0,0,0.3); 
         display: flex; flex-direction: column;">
        <div class="dialog-header" style="background: #2196F3; 
             color: white; padding: 15px 20px; cursor: move; 
             user-select: none; display: flex; 
             justify-content: space-between; align-items: center; 
             flex-shrink: 0;">
```

**å…³é”®å±æ€§è¯´æ˜**ï¼š
- `position: fixed` - å›ºå®šå®šä½
- `top: 50%; left: 50%` - è·ç¦»é¡¶éƒ¨å’Œå·¦è¾¹å„50%
- `transform: translate(-50%, -50%)` - å‘å·¦ä¸Šç§»åŠ¨50%ï¼Œå®ç°å®Œç¾å±…ä¸­
- `width: 800px; height: 600px` - å¯¹è¯æ¡†å¤§å°
- `cursor: move` - é¼ æ ‡å˜æˆç§»åŠ¨æ ·å¼

#### 2. æ‹–æ‹½åŠŸèƒ½å®ç°ï¼ˆç¬¬287-330è¡Œï¼‰
```javascript
// è·å–å¯¹è¯æ¡†å…ƒç´ 
const dialog = document.getElementById('ls138-dialog');

// æ‹–æ‹½å˜é‡
let isDragging = false;
let startX = 0, startY = 0;
let elementX = 0, elementY = 0;

// é¼ æ ‡æŒ‰ä¸‹äº‹ä»¶
dialogHeader.addEventListener('mousedown', (e) => {
    isDragging = true;
    startX = e.clientX;
    startY = e.clientY;
    const rect = dialog.getBoundingClientRect();
    elementX = rect.left;
    elementY = rect.top;
});

// é¼ æ ‡ç§»åŠ¨äº‹ä»¶
document.addEventListener('mousemove', (e) => {
    if (!isDragging) return;
    const deltaX = e.clientX - startX;
    const deltaY = e.clientY - startY;
    dialog.style.left = (elementX + deltaX) + 'px';
    dialog.style.top = (elementY + deltaY) + 'px';
});

// é¼ æ ‡æ¾å¼€äº‹ä»¶
document.addEventListener('mouseup', () => {
    isDragging = false;
});
```

**ä½œç”¨**ï¼š
- è®°å½•é¼ æ ‡åˆå§‹ä½ç½®å’Œå¯¹è¯æ¡†åˆå§‹ä½ç½®
- è®¡ç®—é¼ æ ‡ç§»åŠ¨è·ç¦»
- æ›´æ–°å¯¹è¯æ¡†çš„leftå’Œtopå±æ€§
- å®ç°å¹³æ»‘æ‹–æ‹½

---

## 2ï¸âƒ£ 74LS153å®éªŒè¯´æ˜æ‹–åŠ¨åŠŸèƒ½

### ğŸ“ æ–‡ä»¶ä½ç½®
**æ–‡ä»¶**ï¼š`74ls153_final.js`

### ğŸ” å…³é”®ä»£ç ä½ç½®

#### 1. å¯¹è¯æ¡†åˆå§‹åŒ–ï¼ˆç¬¬146-201è¡Œï¼‰
```javascript
function showLS153Dialog() {
    const dialog = document.createElement('div');
    dialog.className = 'component-dialog';
    dialog.style.cssText = `
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        z-index: 10000;
        width: 800px;
        height: 600px;
        min-width: 600px;
        min-height: 400px;
    `;
```

#### 2. æ‹–æ‹½åŠŸèƒ½å®ç°ï¼ˆç¬¬249-334è¡Œï¼‰
```javascript
// åˆå§‹åŒ–ä½ç½®ï¼šå°†transformè½¬æ¢ä¸ºleft/top
const initialRect = dialog.getBoundingClientRect();
dialog.style.left = initialRect.left + 'px';
dialog.style.top = initialRect.top + 'px';
dialog.style.transform = 'none';

// æ‹–æ‹½äº‹ä»¶å¤„ç†
dialogHeader.addEventListener('mousedown', (e) => {
    if (e.target.classList.contains('dialog-close')) return;
    isDragging = true;
    startX = e.clientX;
    startY = e.clientY;
    const rect = dialog.getBoundingClientRect();
    elementX = rect.left;
    elementY = rect.top;
});

const dragMove = (e) => {
    if (!isDragging) return;
    const deltaX = e.clientX - startX;
    const deltaY = e.clientY - startY;
    const newX = elementX + deltaX;
    const newY = elementY + deltaY;
    
    // é™åˆ¶åœ¨è§†çª—å†…
    const maxX = window.innerWidth - dialog.offsetWidth;
    const maxY = window.innerHeight - dialog.offsetHeight;
    const constrainedX = Math.max(0, Math.min(newX, maxX));
    const constrainedY = Math.max(0, Math.min(newY, maxY));
    
    dialog.style.left = constrainedX + 'px';
    dialog.style.top = constrainedY + 'px';
};
```

**å…³é”®æ”¹è¿›**ï¼š
- åˆå§‹åŒ–æ—¶æ¸…é™¤transformï¼Œæ”¹ç”¨left/top
- æ”¯æŒå¤šæ¬¡æ‹–æ‹½ï¼ˆä¸ä¼šåªèƒ½æ‹–ä¸€æ¬¡ï¼‰
- é™åˆ¶å¯¹è¯æ¡†åœ¨å±å¹•èŒƒå›´å†…
- ç‚¹å‡»å…³é—­æŒ‰é’®æ—¶ä¸è§¦å‘æ‹–æ‹½

---

## 3ï¸âƒ£ æ•°æ®åˆ†é…å™¨åˆ†ç±»ç»“æ„

### ğŸ“ æ–‡ä»¶ä½ç½®
**æ–‡ä»¶**ï¼š`merged_complete.html`

### ğŸ” å…³é”®ä»£ç ä½ç½®ï¼ˆç¬¬515-523è¡Œï¼‰

```html
<li>
    <details>
        <summary>æ•°æ®åˆ†é…å™¨</summary>
        <ul style="margin-left: 20px;">
            <li data-type="74ls138">74LS138 1è·¯-8è·¯</li>
            <li data-type="74139">74LS139 1è·¯-4è·¯</li>
        </ul>
    </details>
</li>
```

**HTMLç»“æ„è¯´æ˜**ï¼š
- `<details>` - å¯å±•å¼€/æŠ˜å çš„å®¹å™¨
- `<summary>` - æ˜¾ç¤ºçš„æ ‡é¢˜ï¼ˆ"æ•°æ®åˆ†é…å™¨"ï¼‰
- `<ul>` - å­é¡¹åˆ—è¡¨
- `<li data-type="...">` - å…·ä½“çš„å®éªŒé¡¹ç›®

**å¦‚ä½•æ·»åŠ æ–°çš„åˆ†ç±»**ï¼š
1. åˆ›å»º `<li>` åŒ…å« `<details>`
2. åœ¨ `<summary>` ä¸­å†™åˆ†ç±»åç§°
3. åœ¨ `<ul>` ä¸­æ·»åŠ  `<li data-type="...">` å­é¡¹
4. `data-type` å¿…é¡»ä¸ç»„ä»¶ç±»å‹åŒ¹é…

---

## 4ï¸âƒ£ è“è‰²é€‰ä¸­ç»„ä»¶å°æ–¹æ¡†è®¾ç½®

### ğŸ“ æ–‡ä»¶ä½ç½®
**æ–‡ä»¶**ï¼š`merged_complete.html`

### ğŸ” å…³é”®ä»£ç ä½ç½®ï¼ˆç¬¬7126-7155è¡Œï¼‰

```javascript
// é€‰æ‹©ç»„ä»¶
function selectComponent(component) {
    selectedComponents.add(component);
    component.style.outline = '2px solid #007bff';      // â† è“è‰²è¾¹æ¡†
    component.style.outlineOffset = '-20px';             // â† è¾¹æ¡†å†…ç¼©
}

// å–æ¶ˆé€‰æ‹©
function deselectComponent(component) {
    selectedComponents.delete(component);
    component.style.outline = '';
    component.style.outlineOffset = '';
}

// æ¸…é™¤æ‰€æœ‰é€‰æ‹©
function clearSelection() {
    selectedComponents.forEach(comp => {
        comp.style.outline = '';
        comp.style.outlineOffset = '';
    });
    selectedComponents.clear();
}
```

### ğŸ“Š å±æ€§è¯´æ˜

| å±æ€§ | å€¼ | ä½œç”¨ |
|------|-----|------|
| `outline` | `2px solid #007bff` | 2pxå®½çš„è“è‰²è¾¹æ¡† |
| `outlineOffset` | `-20px` | è¾¹æ¡†å‘å†…ç¼©è¿›20px |

### ğŸ”§ å¦‚ä½•ä¿®æ”¹å¤§å°

**ä¿®æ”¹è¾¹æ¡†å®½åº¦**ï¼š
```javascript
component.style.outline = '3px solid #007bff';  // æ”¹ä¸º3pxæ›´ç²—
```

**ä¿®æ”¹è¾¹æ¡†å†…ç¼©è·ç¦»**ï¼š
```javascript
component.style.outlineOffset = '-25px';  // æ”¹ä¸º-25pxæ›´ç´§è´´
```

**ä¿®æ”¹è¾¹æ¡†é¢œè‰²**ï¼š
```javascript
component.style.outline = '2px solid #FF0000';  // æ”¹ä¸ºçº¢è‰²
```

---

## 5ï¸âƒ£ å¦‚ä½•åˆ›å»ºæ–°çš„å®éªŒåŠŸèƒ½

### æ­¥éª¤1ï¼šåˆ›å»ºSVGç»„ä»¶æ–‡ä»¶
åˆ›å»º `æ–°ç»„ä»¶.js` æ–‡ä»¶ï¼Œå®šä¹‰SVGæ¨¡æ¿å’Œé€»è¾‘å‡½æ•°

### æ­¥éª¤2ï¼šåˆ›å»ºå¯¹è¯æ¡†è¯´æ˜
åœ¨æ–‡ä»¶ä¸­æ·»åŠ å¯¹è¯æ¡†HTMLå’Œæ‹–æ‹½åŠŸèƒ½

### æ­¥éª¤3ï¼šåœ¨merged_complete.htmlä¸­å¼•å…¥
```html
<script src="æ–°ç»„ä»¶.js"></script>
```

### æ­¥éª¤4ï¼šåœ¨å®éªŒåˆ—è¡¨ä¸­æ·»åŠ 
```html
<li data-type="æ–°ç»„ä»¶">æ–°ç»„ä»¶åç§°</li>
```

### æ­¥éª¤5ï¼šæ³¨å†Œç»„ä»¶
åœ¨merged_complete.htmlä¸­æ³¨å†ŒSVGå’Œé€»è¾‘å‡½æ•°

---

## ğŸ“ æ€»ç»“

| åŠŸèƒ½ | æ–‡ä»¶ | è¡Œå· | ä½œç”¨ |
|------|------|------|------|
| 74LS138æ‹–æ‹½ | 74ls138.js | 287-330 | å®ç°å¯¹è¯æ¡†æ‹–æ‹½ |
| 74LS153æ‹–æ‹½ | 74ls153_final.js | 249-334 | å®ç°å¯¹è¯æ¡†æ‹–æ‹½ |
| æ•°æ®åˆ†é…å™¨ | merged_complete.html | 515-523 | åˆ†ç±»æ˜¾ç¤ºç»„ä»¶ |
| è“è‰²æ–¹æ¡† | merged_complete.html | 7126-7155 | é€‰ä¸­ç»„ä»¶æ˜¾ç¤º |

