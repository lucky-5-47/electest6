# 手势控制功能说明

## 📋 功能概述

手势控制功能为电路设计平台提供了两种操作模式：
1. **🖐️ 抓取模式** - 用于拖拽和移动组件
2. **👆 连线模式** - 专门用于连接组件之间的连线

## 🎯 功能特性

### **1. 抓取模式（五个手指图标）**
- **默认模式**: 系统启动时的默认状态
- **主要功能**: 
  - 拖拽移动组件
  - 选择和操作组件
  - 调整组件大小和旋转
  - 添加文字标注
- **锚点行为**: 锚点不响应点击，避免误触发连线
- **光标样式**: 抓取手型光标

### **2. 连线模式（一个手指图标）**
- **专用模式**: 专门用于连线操作
- **主要功能**:
  - 点击锚点开始连线
  - 自动磁吸到目标锚点
  - 创建组件间的连接
- **组件行为**: 组件不可拖拽，避免误操作
- **锚点增强**: 锚点高亮显示，悬停时变大变色
- **光标样式**: 十字准星光标

## 🎮 操作方法

### **模式切换**

#### **方法1: 快捷键切换**
- **按键**: `Ctrl + 1`
- **效果**: 在两种模式间快速切换
- **提示**: 切换时会显示当前模式的屏幕提示

#### **方法2: 点击图标切换**
- **抓取图标**: 五个手指的图标（🖐️）
- **连线图标**: 一个手指的图标（👆）
- **状态**: 当前激活的模式会高亮显示

### **抓取模式操作**
1. **选择抓取模式**（默认或点击五指图标）
2. **拖拽组件**: 直接点击并拖拽任意组件
3. **调整位置**: 自动磁吸到网格线对齐
4. **其他操作**: 右键菜单、缩放、旋转等

### **连线模式操作**
1. **选择连线模式**（点击单指图标或Ctrl+1）
2. **开始连线**: 点击任意锚点开始拖拽连线
3. **自动磁吸**: 接近目标锚点时自动磁吸
4. **完成连接**: 松开鼠标自动连接到目标锚点

## 🎨 视觉反馈

### **模式指示器**
- **工具栏图标**: 当前模式的图标会高亮显示
- **屏幕提示**: 切换模式时显示2秒的模式提示
- **光标变化**: 不同模式下光标样式不同

### **抓取模式视觉效果**
- **组件**: 正常可拖拽状态
- **锚点**: 正常显示，不响应点击
- **背景**: 正常网格背景
- **光标**: 抓取手型

### **连线模式视觉效果**
- **组件**: 半透明状态，不可拖拽
- **锚点**: 高亮显示，悬停时放大变色
- **背景**: 淡橙色背景提示连线模式
- **光标**: 十字准星

### **连线过程反馈**
- **拖拽中**: 虚线连线跟随鼠标
- **磁吸时**: 目标锚点显示橙色脉冲圆圈
- **即将连接**: 连线变橙色加粗

## 🔧 技术实现

### **文件结构**
```
gesture-control.js        # 手势控制核心类
test1 (1).html           # 主页面（已集成）
extracted-styles.css     # 样式文件（已添加模式样式）
```

### **核心类: GestureControl**

#### **主要方法**
- `setMode(mode)` - 设置模式
- `toggleMode()` - 切换模式
- `isGrabMode()` - 检查是否为抓取模式
- `isConnectMode()` - 检查是否为连线模式
- `showModeHint()` - 显示模式提示

#### **事件系统**
- **自定义事件**: `gestureMode` 事件通知模式变化
- **键盘监听**: 监听 `Ctrl+1` 快捷键
- **UI更新**: 自动更新按钮状态和光标样式

## ⚙️ 配置选项

### **默认设置**
```javascript
// 在 gesture-control.js 中可以修改
this.currentMode = this.MODES.GRAB; // 默认模式
```

### **快捷键自定义**
```javascript
// 在 setupKeyboardShortcuts() 方法中修改
if (e.ctrlKey && e.key === '1') {  // 可以改为其他按键
    e.preventDefault();
    this.toggleMode();
}
```

## 🎯 使用场景

### **抓取模式适用于**
- 🔧 **布局设计**: 拖拽组件到合适位置
- 📐 **精确对齐**: 利用网格磁吸功能对齐组件
- 🎨 **界面美化**: 添加文字标注和装饰
- ⚙️ **组件配置**: 调整组件属性和状态

### **连线模式适用于**
- 🔗 **逻辑连接**: 连接组件间的信号线
- ⚡ **快速连线**: 利用自动磁吸快速连接
- 🎯 **精确连接**: 避免误拖拽组件
- 🔄 **批量连线**: 连续进行多个连接操作

## 🚀 高级技巧

### **快速工作流**
1. **布局阶段**: 使用抓取模式快速布置组件
2. **连线阶段**: 切换到连线模式进行批量连接
3. **调整阶段**: 回到抓取模式进行最终调整

### **快捷键组合**
- `Ctrl+1`: 快速切换模式
- `拖拽 + 网格磁吸`: 精确对齐组件
- `连线 + 锚点磁吸`: 快速精确连接

### **效率提升**
- **模式专用**: 每种模式专注特定操作，避免误操作
- **视觉反馈**: 清晰的模式指示，操作更直观
- **自动磁吸**: 减少手动对齐的工作量

## 🛠️ 故障排除

### **常见问题**

#### **模式切换不生效**
1. 检查是否正确按下 `Ctrl+1`
2. 确认页面已获得焦点
3. 查看控制台是否有错误信息

#### **连线模式下无法连线**
1. 确认已切换到连线模式（单指图标高亮）
2. 检查锚点是否正确显示
3. 尝试点击锚点而不是组件本体

#### **抓取模式下无法拖拽**
1. 确认已切换到抓取模式（五指图标高亮）
2. 检查是否点击在组件上而不是锚点
3. 确认组件没有被其他元素遮挡

## 📝 更新日志

### **v1.0.0** (当前版本)
- ✅ 实现抓取模式和连线模式
- ✅ 添加快捷键切换功能
- ✅ 集成自动磁吸功能
- ✅ 添加视觉反馈和模式提示
- ✅ 优化用户交互体验

### **未来计划**
- 🔄 添加更多手势模式
- 🔄 支持自定义快捷键
- 🔄 添加模式记忆功能
- 🔄 支持触摸设备手势
